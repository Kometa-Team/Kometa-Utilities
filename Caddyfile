# Domain configuration - update yourdomain.com to your actual domain
yourdomain.com {
    # Handle /anidb-service path
    handle /anidb-service* {
        uri strip_prefix /anidb-service
        
        # Handle errors (like when the backend is down)
        handle_errors {
            @maintenance expression {err.status_code} in [502, 503, 504]
            handle @maintenance {
                rewrite * /maintenance.html
                file_server {
                    root /var/www/html
                }
            }
        }

        # Proxy to FastAPI backend
        reverse_proxy anidb-mirror:8000
    }

    # Optional: Handle root path for other services
    # handle / {
    #     respond "Welcome! Available services: /anidb-service"
    # }
}